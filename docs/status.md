# 專案進度總結

## 已完成
- **資料庫持久化**：SQLite 儲存帳號、Session、房間、玩家清單、聊天、房間邀請碼與回合/開局時間；支援 `OCGP_DB_PATH` 覆寫。
- **安全與登入**：密碼隨機 Salt + SHA-256 雜湊；基礎 API 權限檢查（X-Auth-Token）。
- **日誌與備份**：操作/錯誤日誌輸出 `backend/out/logs/ocgp.log`；提供備份指南（`docs/backup.md`）。
- **房間與搜尋**：房主可修改房名/遊戲/私密與邀請碼；支援名稱/遊戲/邀請碼搜尋；私人房需邀請碼加入。
- **即時性**：WebSocket 推播房間狀態與聊天（失敗自動回落輪詢）。
- **聊天與系統訊息**：房間內聊天存 DB；加入/離開/開局/重開會推送系統訊息。
- **斷線保留**：對局中離開會保留 30 秒可重連，逾時才重置對局。
- **回合計時器**：每回合 15 秒，超時自動判負並推播；前端棋盤右上顯示倒數。
- **總用時計時**：棋盤右上紅框顯示本局總用時（開局時間同步自後端）。
- **前端功能**：房間列表、邀請碼加入、聊天、即時延遲顯示（自動 ping）、回合倒數提示。
- **執行腳本與 Docker**：`run.ps1` / `run.cmd` 自動下載依賴、編譯並啟動；Dockerfile 內建所有依賴。

## 尚未完成 / 待改進
- **倒數計時精確要求**：仍需依需求文件的 1–3 秒回應 SLA 更嚴格處理（目前回合 15 秒，無 1 秒內 UI 回應驗證）。
- **更嚴謹的超時處置**：可增加前端醒目提示或自動鎖定棋步，並在後端記錄超時原因。
- **TLS 與權限控管**：尚未導入 HTTPS/TLS 與 DB 連線權限管理。
- **自動化測試**：尚未撰寫 API/棋規/WebSocket 流程測試。
- **部署/監控**：尚未提供 Compose、健康檢查、監控與告警。

## 使用重點
- 預設 HTTP 埠：`8080`；WebSocket 埠：`8091`（可用 `OCGP_WS_PORT` 覆寫）。
- 預設 DB 路徑：`backend/out/data/ocgp.sqlite`（可用 `OCGP_DB_PATH` 覆寫）。
- run 腳本：在 `backend` 執行 `run.ps1 -Port 8080` 或 `run.cmd 8080`。
